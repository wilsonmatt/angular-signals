import{a as ie}from"./chunk-HRFXB3A6.js";import{$a as W,Ba as y,Db as ne,Ha as f,I as J,Ja as u,K as z,La as o,Ma as r,N as G,Na as M,Oa as E,P as K,Pa as I,Qa as p,V as m,Va as s,Wa as h,Xa as x,Y as g,Za as _,a as R,ab as X,b as q,bb as Y,da as k,fa as S,ga as C,j as L,ja as Q,la as w,lb as b,mb as j,n as P,nb as Z,q as U,va as a,vb as ee,w as A,wb as V,x as B,xb as F,y as H,yb as te}from"./chunk-RVQ7U25F.js";function O(n,e){!e?.injector&&k(O);let l=e?.injector??m(Q),i=new L(1),t=Z(()=>{let c;try{c=n()}catch(d){j(()=>i.error(d));return}j(()=>i.next(c))},{injector:l,manualCleanup:!0});return l.get(w).onDestroy(()=>{t.destroy(),i.complete()}),i.asObservable()}function D(n,e){let l=!e?.manualCleanup;l&&!e?.injector&&k(D);let i=l?e?.injector?.get(w)??m(w):null,t;e?.requireSync?t=y({kind:0}):t=y({kind:1,value:e?.initialValue});let c=n.subscribe({next:d=>t.set({kind:1,value:d}),error:d=>{if(e?.rejectErrors)throw d;t.set({kind:2,error:d})}});return i?.onDestroy(c.unsubscribe.bind(c)),b(()=>{let d=t();switch(d.kind){case 1:return d.value;case 2:throw d.error;case 0:throw new G(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var T=(()=>{let e=class e{vehicleSelected(i){let t=this.vehicles().find(c=>c.name===i);this.selectedVehicle.set(t)}constructor(){this.url="https://swapi.py4e.com/api/vehicles",this.http=m(ie),this.vehicles$=this.http.get(this.url).pipe(U(i=>i.results.map(t=>q(R({},t),{cost_in_credits:isNaN(Number(t.cost_in_credits))?String(Math.random()*1e5):t.cost_in_credits}))),J(1),H(this.handleError)),this.vehicles=D(this.vehicles$,{initialValue:[]}),this.selectedVehicle=y(void 0),this.vehicleFilms$=O(this.selectedVehicle).pipe(B(Boolean),z(i=>A(i.films.map(t=>this.http.get(t))))),this.vehicleFilms=D(this.vehicleFilms$,{initialValue:[]})}handleError(i){let t="";return i.error instanceof ErrorEvent?t=`An error occurred: ${i.error.message}`:t=`Server returned code: ${i.status}, error message is: ${i.message}`,console.error(t),P(()=>t)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var le=n=>({active:n});function se(n,e){if(n&1){let l=E();o(0,"button",7),I("click",function(){let t=S(l).$implicit,c=p(2);return C(c.onSelected(t.name))}),s(1),r()}if(n&2){let l,i=e.$implicit,t=p(2);u("ngClass",W(2,le,(i==null?null:i.name)===((l=t.selectedVehicle())==null?null:l.name))),a(),x(" ",i.name," ")}}function ce(n,e){if(n&1&&(o(0,"div",4)(1,"div",5),f(2,se,2,4,"button",6),r()()),n&2){let l=p();a(2),u("ngForOf",l.vehicles())}}function ae(n,e){if(n&1&&(o(0,"div",8),s(1),r()),n&2){let l=p();a(),x(" ",l.errorMessage," ")}}var re=(()=>{let e=class e{constructor(){this.pageTitle="Vehicles",this.errorMessage="",this.vehicleService=m(T),this.vehicles=b(()=>{try{return this.vehicleService.vehicles()}catch(i){return this.errorMessage=typeof i=="string"?i:"Error",[]}}),this.selectedVehicle=this.vehicleService.selectedVehicle}onSelected(i){this.vehicleService.vehicleSelected(i)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g({type:e,selectors:[["sw-vehicle-list"]],standalone:!0,features:[_],decls:5,vars:3,consts:[[1,"card"],[1,"card-header"],["class","card-body",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card-body"],[1,"list-group"],["type","button","class","list-group-item",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"list-group-item",3,"click","ngClass"],[1,"alert","alert-danger"]],template:function(t,c){t&1&&(o(0,"div",0)(1,"div",1),s(2),r(),f(3,ce,3,1,"div",2)(4,ae,2,1,"div",3),r()),t&2&&(a(2),x(" ",c.pageTitle," "),a(),u("ngIf",c.vehicles().length),a(),u("ngIf",c.errorMessage))},dependencies:[ee,V,F],encapsulation:2});let n=e;return n})();function de(n,e){if(n&1&&(o(0,"li",11),s(1),r()),n&2){let l=e.$implicit;a(),h(l.title)}}function me(n,e){if(n&1&&(o(0,"div",4)(1,"div",5),s(2,"Films:"),r(),o(3,"div",6)(4,"ul",9),f(5,de,2,1,"li",10),r()()()),n&2){let l=p(2);a(5),u("ngForOf",l.vehicleFilms())}}function ue(n,e){if(n&1){let l=E();o(0,"div",1)(1,"div",2),s(2),r(),o(3,"div",3)(4,"div",4)(5,"div",5),s(6,"Name:"),r(),o(7,"div",6),s(8),r(),o(9,"div",5)(10,"button",7),I("click",function(){S(l);let t=p();return C(t.addToCart(t.vehicle()))}),s(11,"Add to Cart "),r()()(),o(12,"div",4)(13,"div",5),s(14,"Classification:"),r(),o(15,"div",6),s(16),r()(),o(17,"div",4)(18,"div",5),s(19,"Price (in credits):"),r(),o(20,"div",6),s(21),X(22,"number"),r()(),o(23,"div",4)(24,"div",5),s(25,"Crew:"),r(),o(26,"div",6),s(27),r()(),o(28,"div",4)(29,"div",5),s(30,"Passengers:"),r(),o(31,"div",6),s(32),r()(),o(33,"div",4)(34,"div",5),s(35,"Cargo Capacity:"),r(),o(36,"div",6),s(37),r()(),f(38,me,6,1,"div",8),r()()}if(n&2){let l,i,t,c,d,N,v=p();a(2),x(" ",v.pageTitle()," "),a(6),h((l=v.vehicle())==null?null:l.name),a(8),h((i=v.vehicle())==null?null:i.vehicle_class),a(5),h(Y(22,8,(t=v.vehicle())==null?null:t.cost_in_credits,"1.2-2")),a(6),h((c=v.vehicle())==null?null:c.crew),a(5),h((d=v.vehicle())==null?null:d.passengers),a(5),h((N=v.vehicle())==null?null:N.cargo_capacity),a(),u("ngIf",v.vehicleFilms())}}var oe=(()=>{let e=class e{constructor(){this.errorMessage="",this.cartService=m(ne),this.vehicleService=m(T),this.vehicle=this.vehicleService.selectedVehicle,this.vehicleFilms=this.vehicleService.vehicleFilms,this.pageTitle=b(()=>this.vehicle()?`Detail for: ${this.vehicle()?.name}`:"")}addToCart(i){i&&this.cartService.addToCart(i)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g({type:e,selectors:[["sw-vehicle-detail"]],standalone:!0,features:[_],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[1,"btn","btn-primary",3,"click"],["class","row",4,"ngIf"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(t,c){t&1&&f(0,ue,39,11,"div",0),t&2&&u("ngIf",c.vehicle())},dependencies:[V,F,te],encapsulation:2});let n=e;return n})();var Le=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g({type:e,selectors:[["sw-vehicle-shell"]],standalone:!0,features:[_],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-4"],[1,"col-md-8"]],template:function(t,c){t&1&&(o(0,"div",0)(1,"div",1),M(2,"sw-vehicle-list"),r(),o(3,"div",2),M(4,"sw-vehicle-detail"),r()())},dependencies:[re,oe],encapsulation:2});let n=e;return n})();export{Le as VehicleShellComponent};
